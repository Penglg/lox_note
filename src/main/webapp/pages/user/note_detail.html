<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>lox笔记-详细页</title>
</head>
<body>
<div style="text-align: center">
    <h1>笔记详细</h1><br><br>
    <a href="http://localhost:8080/pages/user/note.html">返回主页</a>
    <button id="show-btn" type="button">展示</button>
    <div style="text-align: center">
        <table id="show"></table>
    </div>
</div>

<script src="../../js/jquery-3.6.0.js" type="text/javascript"></script>
<script>
    $(function () {
        let url = decodeURI(location.href);
        let args = url.split("?id="); // 获取url携带参数
        let id = args[1];

        $("#show-btn").click(function () {
            $.ajax({
                type:"get",
                url:"/notes/" + id,
                async:false,
                success: function (result) {
                    if (result.code === 30001) {
                        let table;

                        table = "<tr>" +
                            "<th>标题</th>" + "<th>内容</th>" + "<th>点赞数</th>" + "<th>收藏数</th>" + "<th>发布日期</th>" +
                            "</tr>" +
                            "<tr>" +
                            "<td>" + result.data.title + "</td>" +
                            "<td>" + result.data.content + "</td>" +
                            "<td>" + result.data.likes + "</td>" +
                            "<td>" + result.data.collect + "</td>" +
                            "<td>" + result.data.dateTime + "</td>" +
                            "</tr>";

                        $("#show").html(table);
                    } else {
                        alert("获取失败！请重新载入");
                    }
                },
                error:function () {
                    alert("系统繁忙，稍后再试");
                }
            })
        })
    })
</script>
</body>
</html>